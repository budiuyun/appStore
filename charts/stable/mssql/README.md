# mssql

Microsoft SQL Server 2025是一个功能强大的关系型数据库管理系统，支持向量搜索和AI功能

## 应用介绍

本应用提供以下功能：
- 高性能关系型数据库：适用于企业级应用和数据处理
- 向量搜索能力：支持AI和机器学习应用场景
- 强大的事务处理：确保数据完整性和一致性
- 高可用性选项：保障业务连续性
- 全面的安全功能：保护敏感数据
- 灵活的扩展能力：适应不同规模的业务需求

## 配置说明

| 参数 | 说明 | 默认值 |
|------|------|--------|
| 镜像标签 | SQL Server版本 | `2025-latest` |
| 服务端口 | 数据库服务端口 | `1433` |
| 资源限制 | CPU和内存限制 | 见下文 |
| 持久化存储 | 数据存储配置 | 见下文 |

### 资源配置
- CPU限制: 500m（相当于0.5核心）
- 内存限制: 2Gi（相当于2GB）
- CPU请求: 200m（相当于0.2核心）
- 内存请求: 1Gi（相当于1GB）

### 持久化存储配置
- 启用持久化: true（建议开启）
- 挂载路径: 
  - /var/opt/mssql/data（数据文件）
  - /var/opt/mssql/log（日志文件）
  - /var/opt/mssql/secrets（密钥文件）
- 存储大小: 8Gi（可根据需求调整）
- 存储类: local（取决于集群环境）

## 数据存储

SQL Server的数据存储在容器的 `/var/opt/mssql/data` 目录中。启用持久化存储后，数据将保存在持久卷中，即使容器重启也不会丢失。

**提示**：请确保分配足够的存储空间，特别是对于生产环境。建议至少8GB的存储空间，并根据预期的数据量适当调整。

## 使用说明

1. 部署应用后，可通过以下方式访问服务：
   - 数据库客户端：连接到服务的1433端口
   - 使用标准SQL Server连接工具，如SQL Server Management Studio或Azure Data Studio

2. 连接信息：
   - 服务器地址：集群内可使用服务名称
   - 端口：1433
   - 用户名：sa
   - 密码：部署时设置的MSSQL_SA_PASSWORD值

3. 安全建议：
   - 生产环境中创建额外的用户账户，避免使用sa账户
   - 定期更改密码
   - 配置适当的网络策略限制访问

## 环境变量配置

SQL Server支持多种环境变量配置，主要包括：

| 环境变量 | 描述 | 默认值 |
|---------|------|--------|
| ACCEPT_EULA | 接受最终用户许可协议 | `Y` |
| MSSQL_SA_PASSWORD | SQL Server系统管理员(SA)密码 | `` |
| MSSQL_PID | SQL Server版本(Developer, Express, Standard, Enterprise, Web) | `Developer` |
| TZ | 时区设置 | `Asia/Shanghai` |

## 安全注意事项

- 生产环境中请设置强密码
- 考虑使用网络策略限制数据库访问
- 定期备份数据库
- 保持SQL Server更新到最新版本
- 配置适当的资源限制，避免资源耗尽